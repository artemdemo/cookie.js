{"version":3,"sources":["cookie.es6"],"names":[],"mappings":"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","file":"cookie.js","sourcesContent":["export let cookie = (() => {\n\n    /**\n     * Set of helper functions\n     * @type {*}\n     */\n    let helpers = {\n\n        /**\n         * Is the given value a plain object / an object whose constructor is `Object`?\n         * @param {*} value\n         * @returns {boolean}\n         */\n        isPlainObject: (value) => !!value && Object.prototype.toString.call(value) === '[object Object]',\n\n        /**\n         * Unlike JavaScript's built-in escape functions, this method\n         * only escapes characters that are not allowed in cookies.\n         * @param {string} value\n         * @returns {string}\n         */\n        encode: (value) => String(value).replace(/[,;\"\\\\=\\s%]/g, (character) => encodeURIComponent(character)),\n\n        /**\n         * Decode\n         * @param {string} value\n         * @returns {string}\n         */\n        decode: (value) => decodeURIComponent(value),\n\n        /**\n         * Return fallback if the value is not defined, otherwise return value.\n         * @param value\n         * @param fallback\n         * @returns {*}\n         */\n        retrieve: (value, fallback) => value == null ? fallback : value\n    };\n\n    /**\n     * Main module object\n     * @type {*}\n     * @note\n     * Why I'm using 'function() {}' instead of 'Arrow function' ?\n     * Pay attention that I'm using 'arrow function' _AND_ regular function declaration with 'function() {}'\n     * It's not an accident. 'Arrow function' will keep 'this' of outer scope and in this case it wouldn't be\n     * the main 'cookie' object as you hope. It will be global 'this' and in case of module it will get 'undefined'\n     * @source https://github.com/babel/babel/issues/562#issuecomment-70914673\n     */\n    let cookie = {\n\n        /**\n         * Default options\n         */\n        defaultOptions: {\n            expires: '',\n            domain: null,\n            path: null,\n            secure: false\n        },\n\n        /**\n         * By default expires time in the options is in days.\n         */\n        expiresMultiplier: 60 * 60 * 24,\n\n        /**\n         * Set cookie. Value will be escaped for you\n         * @param key\n         * @param value\n         * @param userOptions\n         * @returns {*}\n         * @example\n         *    cookie.set('key', 'value');\n         * @example\n         *    cookie.set({\n         *       key1: 'value1',\n         *       key2: 'value2'\n         *    });\n         * @example\n         *    cookie.set('key', 'value', {\n         *       expires: 7, // expires in one week\n         *    });\n         * @note\n         * Yes, I'm using 'function() {}' instead of 'Arrow function', see explanation above\n         */\n        set: function (key, value, userOptions) {\n            if (helpers.isPlainObject(key)) {\n                // `key` contains an object with keys and values for cookies, `value` contains the options object.\n\n                for (let k in key) {\n                    if (key.hasOwnProperty(k)) this.set(k, key[k], value);\n                }\n            } else {\n                let options = Object.assign(this.defaultOptions, userOptions);\n\n                // Empty string for session cookies.\n                let expiresType = typeof(options.expires);\n\n                if (expiresType === 'string' && options.expires !== '') {\n                    options.expires = new Date(options.expires);\n                } else if (expiresType === 'number') {\n                    // This is needed because IE does not support the `max-age` cookie attribute.\n                    options.expires = new Date(+new Date + 1000 * this.expiresMultiplier * options.expires);\n                }\n\n                if (options.expires !== '' && 'toGMTString' in options.expires) {\n                    options.expires = ';expires=' + options.expires.toGMTString();\n                }\n\n                let path = options.path ? `;path=${options.path}` : '';\n                let domain = options.domain ? `;domain=${options.domain}` : '';\n                let secure = options.secure ? ';secure' : '';\n\n                document.cookie = helpers.encode(key) + '=' + helpers.encode(value) + options.expires + path + domain + secure;\n            }\n\n            return this; // Return the `cookie` object to make chaining possible.\n        },\n\n        /**\n         *\n         * @param key\n         * @param value\n         * @param options\n         * @returns {*}\n         * @note\n         * Yes, I'm using 'function() {}' instead of 'Arrow function', see explanation above\n         */\n        setDefault: function (key, value, options) {\n            if (helpers.isPlainObject(key)) {\n                for (let k in key) {\n                    if (key.hasOwnProperty(k) && this.get(k) === undefined) this.set(k, key[k], value);\n                }\n                return cookie;\n            } else if (this.get(key) === undefined) {\n                return this.set.apply(this, arguments);\n            }\n        },\n\n        /**\n         *\n         * @param keyArguments\n         * @returns {cookie} - Return the `cookie` object to make chaining possible.\n         * @note\n         * Yes, I'm using 'function() {}' instead of 'Arrow function', see explanation above\n         */\n        remove: function (...keyArguments) {\n            let keys = Array.isArray(keyArguments[0]) ? keyArguments[0] : keyArguments;\n\n            for (let i = 0, len = keys.length; i < len; i++) {\n                this.set(keys[i], '', -1);\n            }\n\n            return this;\n        },\n\n        /**\n         * Remove all cookies\n         * @note\n         * Yes, I'm using 'function() {}' instead of 'Arrow function', see explanation above\n         */\n        empty: function () {\n            this.remove(Object.keys(this.all()))\n        },\n\n        /**\n         *\n         * @param keys\n         * @param fallback\n         * @returns {*}\n         * @note\n         * Yes, I'm using 'function() {}' instead of 'Arrow function', see explanation above\n         */\n        get: function (keys, fallback) {\n            let cookies = this.all();\n\n            if (Array.isArray(keys)) {\n                let result = {};\n\n                for (let i = 0, len = keys.length; i < len; i++) {\n                    let value = keys[i];\n                    result[value] = helpers.retrieve(cookies[value], fallback);\n                }\n\n                return result;\n            }\n\n            return helpers.retrieve(cookies[keys], fallback);\n        },\n\n        /**\n         * Returns objet with all available cookie\n         * @returns {{}}\n         */\n        all: () => {\n            if (document.cookie === '') return {};\n\n            let cookies = document.cookie.split('; '),\n                result = {};\n\n            for (let i = 0, len = cookies.length; i < len; i++) {\n                let item = cookies[i].split('=');\n                let key = helpers.decode(item.shift());\n                result[key] = helpers.decode(item.join('='));\n            }\n\n            return result;\n        },\n\n        /**\n         * Check whether cookies are enabled in the browser\n         * @returns {boolean}\n         */\n        enabled: () => {\n            if (navigator.cookieEnabled) return true;\n\n            let result = cookie.set('_', '_').get('_') === '_';\n            cookie.remove('_');\n            return result;\n        }\n    };\n\n    return cookie;\n\n})();"],"sourceRoot":"/source/"}